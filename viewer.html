<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PDF Viewer | Urja Arts</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
  background: #eee;
}

header {
  height: 60px;
  background: #1b5e20;
  color: white;
  display: flex;
  align-items: center;
  padding: 0 16px;
}

#viewer-container {
  position: fixed;
  top: 60px;
  left: 0;
  right: 0;
  bottom: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

#pdf-viewer {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
}

canvas {
  margin-bottom: 20px;
  max-width: 100%;
  height: auto !important;
}

/* WATERMARK */
.watermark {
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.08;
  font-size: 60px;
  color: green;
  transform: rotate(-30deg);
  display: flex;
  justify-content: center;
  align-items: center;
}
</style>
</head>

<body>

<header>
  <a href="catalogue.html" style="color:white;text-decoration:none">‚Üê Back</a>
</header>

<div id="viewer-container">
  <div id="pdf-viewer"></div>
</div>

<div class="watermark">URJA ARTS URJA ARTS URJA ARTS</div>

<script type="module">
import * as pdfjsLib from "./pdfjs/pdf.mjs";

pdfjsLib.GlobalWorkerOptions.workerSrc = "./pdfjs/pdf.worker.mjs";

const params = new URLSearchParams(window.location.search);
const pdfUrl = params.get("file");

const scale = Math.min(window.innerWidth / 800, 1.5);

const loadingTask = pdfjsLib.getDocument(pdfUrl);
loadingTask.promise.then(pdf => {
  for (let i = 1; i <= pdf.numPages; i++) {
    pdf.getPage(i).then(page => {
      const viewport = page.getViewport({ scale });

      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");

      canvas.width = viewport.width;
      canvas.height = viewport.height;

      document.getElementById("pdf-viewer").appendChild(canvas);

      page.render({
        canvasContext: ctx,
        viewport
      });
    });
  }
});
</script>

</body>
</html>
